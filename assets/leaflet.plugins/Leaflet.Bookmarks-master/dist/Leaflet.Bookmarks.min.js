!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var o;"undefined"!=typeof window?o=window:"undefined"!=typeof global?o=global:"undefined"!=typeof self&&(o=self),(o.Leaflet||(o.Leaflet={})).Bookmarks=t()}}(function(){return function t(o,e,i){function s(a,r){if(!e[a]){if(!o[a]){var l="function"==typeof require&&require;if(!r&&l)return l(a,!0);if(n)return n(a,!0);var p=new Error("Cannot find module '"+a+"'");throw p.code="MODULE_NOT_FOUND",p}var m=e[a]={exports:{}};o[a][0].call(m.exports,function(t){var e=o[a][1][t];return s(e?e:t)},m,m.exports,t,o,e,i)}return e[a].exports}for(var n="function"==typeof require&&require,a=0;a<i.length;a++)s(i[a]);return s}({1:[function(t,o){(function(e){/**
 * Leaflet bookmarks plugin
 * @license MIT
 * @author Alexander Milevski <info@w8r.name>
 * @preserve
 */
var i=e.L||t("leaflet");i.Control.Bookmarks=o.exports=t("./src/bookmarks")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./src/bookmarks":2,leaflet:void 0}],2:[function(t,o){(function(e){var i=e.L||t("leaflet"),s=t("./storage"),n=t("./formpopup"),a=t("./string").substitute;t("./leaflet.delegate"),i.Util._template=i.Util._template||a;var r=i.Control.extend({statics:{Storage:s,FormPopup:n},options:{localStorage:!0,storage:null,name:"leaflet-bookmarks",position:"topright",containerClass:"leaflet-bar leaflet-bookmarks-control",expandedClass:"expanded",headerClass:"bookmarks-header",listClass:"bookmarks-list",iconClass:"bookmarks-icon",iconWrapperClass:"bookmarks-icon-wrapper",listWrapperClass:"bookmarks-list-wrapper",listWrapperClassAdd:"list-with-button",wrapperClass:"bookmarks-container",addBookmarkButtonCss:"add-bookmark-button",animateClass:"bookmark-added-anim",animateDuration:150,formPopup:{popupClass:"bookmarks-popup"},bookmarkTemplate:'<li class="{{ itemClass }}" data-id="{{ data.id }}"><span class="{{ removeClass }}">&times;</span><span class="{{ nameClass }}">{{ data.name }}</span><span class="{{ coordsClass }}">{{ data.coords }}</span></li>',emptyTemplate:'<li class="{{ itemClass }} {{ emptyClass }}">{{ data.emptyMessage }}</li>',dividerTemplate:'<li class="divider"></li>',bookmarkTemplateOptions:{itemClass:"bookmark-item",nameClass:"bookmark-name",coordsClass:"bookmark-coords",removeClass:"bookmark-remove",emptyClass:"bookmarks-empty"},defaultBookmarkOptions:{editable:!0,removable:!0},title:"Bookmarks",emptyMessage:"No bookmarks yet",addBookmarkMessage:"Add new bookmark",collapseOnClick:!0,scrollOnAdd:!0,scrollDuration:1e3,popupOnShow:!0,addNewOption:!0,popupTemplate:"<div><h3>{{ name }}</h3><p>{{ latlng }}, {{ zoom }}</p></div>",getPopupContent:function(t){return a(this.options.popupTemplate,{latlng:this.formatCoords(t.latlng),name:t.name,zoom:this._map.getZoom()})}},initialize:function(t){t=t||{},this._data=[],this._list=null,this._marker=null,this._icon=null,this._isCollapsed=!0,i.Util.setOptions(this,t),this._storage=t.storage||(this.options.localStorage?new s(this.options.name,s.engineType.LOCALSTORAGE):new s(this.options.name,s.engineType.GLOBALSTORAGE)),i.Control.prototype.initialize.call(this,this.options)},onAdd:function(t){var o=this._container=i.DomUtil.create("div",this.options.containerClass);i.DomEvent.disableClickPropagation(o).disableScrollPropagation(o),o.innerHTML='<div class="'+this.options.headerClass+'"><span class="'+this.options.iconWrapperClass+'"><span class="'+this.options.iconClass+'"></span></span>',this._icon=o.querySelector("."+this.options.iconClass),this._icon.title=this.options.title,this._createList(this.options.bookmarks);var e=i.DomUtil.create("div",this.options.wrapperClass,this._container);return e.appendChild(this._listwrapper),this._initLayout(),i.DomEvent.on(o,"click",this._onClick,this).on(o,"contextmenu",i.DomEvent.stopPropagation),t.on("bookmark:new",this._onBookmarkAddStart,this).on("bookmark:add",this._onBookmarkAdd,this).on("bookmark:edited",this._onBookmarkEdited,this).on("bookmark:show",this._onBookmarkShow,this).on("bookmark:edit",this._onBookmarkEdit,this).on("bookmark:options",this._onBookmarkOptions,this).on("bookmark:remove",this._onBookmarkRemove,this).on("resize",this._initLayout,this),o},onRemove:function(t){t.off("bookmark:new",this._onBookmarkAddStart,this).off("bookmark:add",this._onBookmarkAdd,this).off("bookmark:edited",this._onBookmarkEdited,this).off("bookmark:show",this._onBookmarkShow,this).off("bookmark:edit",this._onBookmarkEdit,this).off("bookmark:options",this._onBookmarkOptions,this).off("bookmark:remove",this._onBookmarkRemove,this).off("resize",this._initLayout,this),this._marker&&this._marker._popup_._close(),this.options.addNewOption&&i.DomEvent.off(this._container.querySelector("."+this.options.addBookmarkButtonCss),"click",this._onAddButtonPressed,this),this._marker=null,this._popup=null,this._container=null},getData:function(){return this._filterBookmarksOutput(this._data)},_createList:function(t){if(this._listwrapper=i.DomUtil.create("div",this.options.listWrapperClass,this._container),this._list=i.DomUtil.create("ul",this.options.listClass,this._listwrapper),i.DomEvent.delegate(this._list,"."+this.options.bookmarkTemplateOptions.itemClass,"click",this._onBookmarkClick,this),this._setEmptyListContent(),i.Util.isArray(t))this._appendItems(t);else if("function"==typeof t)this._appendItems(t());else{var o=this;this._storage.getAllItems(function(t){o._appendItems(t)})}},_setEmptyListContent:function(){this._list.innerHTML=a(this.options.emptyTemplate,i.Util.extend(this.options.bookmarkTemplateOptions,{data:{emptyMessage:this.options.emptyMessage}}))},_initLayout:function(){var t=this._map.getSize();if(this._listwrapper.style.maxHeight=Math.min(.6*t.y,t.y-100)+"px","topleft"===this.options.position&&i.DomUtil.addClass(this._container,"leaflet-bookmarks-to-right"),this.options.addNewOption){var o=i.DomUtil.create("div",this.options.addBookmarkButtonCss,this._listwrapper.parentNode);this._listwrapper.parentNode.classList.add(this.options.listWrapperClassAdd),o.innerHTML='<span class="plus">+</span><span class="content">'+this.options.addBookmarkMessage+"</span>",i.DomEvent.on(o,"click",this._onAddButtonPressed,this)}},_onAddButtonPressed:function(t){i.DomEvent.stop(t),this.collapse(),this._map.fire("bookmark:new",{latlng:this._map.getCenter()})},_filterBookmarks:function(t){return this.options.filterBookmarks?this.options.filterBookmarks.call(this,t):t},_filterBookmarksOutput:function(t){return this.options.filterBookmarksOutput?this.options.filterBookmarksOutput.call(this,t):t},_appendItems:function(t){var o="",e=0===this._data.length;t=this._filterBookmarks(t),this._data=this._data.concat(t);for(var i=0,s=t.length;s>i;i++)o+=this._renderBookmarkItem(t[i]);if(""!==o&&(e?this._list.innerHTML=o:this._list.innerHTML+=o),this._isCollapsed){var n=this._container,a=this.options.animateClass;n.classList.add(a),window.setTimeout(function(){n.classList.remove(a)},this.options.animateDuration)}else this._scrollToLast()},_scrollToLast:function(){function t(r){n||(n=r),e=Math.min(e+a,s),o.scrollTop=e,e!==s&&i.Util.requestAnimFrame(t)}var o=this._listwrapper,e=this._listwrapper.scrollTop,s=this._list.lastChild.offsetTop,n=0,a=(s-e)/(this.options.scrollDuration/62.5);i.Util.requestAnimFrame(t)},_renderBookmarkItem:function(t){return t.divider?a(this.options.dividerTemplate,t):(this.options.bookmarkTemplateOptions.data=this._getBookmarkDataForTemplate(t),a(this.options.bookmarkTemplate,this.options.bookmarkTemplateOptions))},_getBookmarkDataForTemplate:function(t){return this.options.getBookmarkDataForTemplate?this.options.getBookmarkDataForTemplate.call(this,t):{coords:this.formatCoords(t.latlng),name:this.formatName(t.name),zoom:t.zoom,id:t.id}},formatCoords:function(t){return this.options.formatCoords?this.options.formatCoords.call(this,t):t[0].toFixed(4)+",&nbsp;"+t[1].toFixed(4)},formatName:function(t){return this.options.formatName?this.options.formatName.call(this,t):t},expand:function(){i.DomUtil.addClass(this._container,this.options.expandedClass),this._isCollapsed=!1},collapse:function(){i.DomUtil.removeClass(this._container,this.options.expandedClass),this._isCollapsed=!0},_onClick:function(t){var o=i.DomUtil.hasClass(this._container,this.options.expandedClass),e=t.target||t.srcElement;if(o){if(e===this._container)return this.collapse();for(;e!==this._container;){if(i.DomUtil.hasClass(e,this.options.headerClass)||i.DomUtil.hasClass(e,this.options.listWrapperClass)){this.collapse();break}e=e.parentNode}}else this.expand()},_onBookmarkAddStart:function(t){this._marker&&this._popup._close(),this._marker=new i.Marker(t.latlng,{icon:this.options.icon||new i.Icon.Default,draggable:!0,riseOnHover:!0}).addTo(this._map),this._marker.on("popupclose",this._onPopupClosed,this),this._popup=new i.Control.Bookmarks.FormPopup(i.Util.extend(this.options.formPopup,{mode:i.Control.Bookmarks.FormPopup.modes.CREATE}),this._marker,this,i.Util.extend({},t.data,this.options.defaultBookmarkOptions)).addTo(this._map)},_onBookmarkAdd:function(t){var o=this,e=this._map;t=this._cleanBookmark(t.data),this._storage.setItem(t.id,t,function(t){e.fire("bookmark:saved",{data:t}),o._appendItems([t])}),this._showBookmark(t)},_onBookmarkEdited:function(t){var o=this,e=this._map,i=this._cleanBookmark(t.data);this._storage.setItem(i.id,i,function(t){e.fire("bookmark:saved",{data:t});var s=o._data;o._data=[];for(var n=0,a=s.length;a>n;n++)s[n].id===i.id&&s.splice(n,1,i);o._appendItems(s)}),this._showBookmark(i)},_cleanBookmark:function(t){return i.Util.isArray(t.latlng)||(t.latlng=[t.latlng.lat,t.latlng.lng]),t},_onPopupClosed:function(){this._map.removeLayer(this._marker),this._marker=null,this._popup=null},_getBookmark:function(t){for(var o=0,e=this._data.length;e>o;o++)if(this._data[o].id===t)return this._data[o];return null},_onBookmarkShow:function(t){this._gotoBookmark(t.data)},_onBookmarkEdit:function(t){this._editBookmark(t.data)},_onBookmarkRemove:function(t){this._removeBookmark(t.data)},_onBookmarkOptions:function(t){this._bookmarkOptions(t.data)},_bookmarkOptions:function(t){{var o=i.latLng(t.latlng);this._marker=this._createMarker(o,t)}this._popup=new i.Control.Bookmarks.FormPopup(i.Util.extend(this.options.formPopup,{mode:i.Control.Bookmarks.FormPopup.modes.OPTIONS}),this._marker,this,t).addTo(this._map)},_editBookmark:function(t){var o=i.latLng(t.latlng),e=this._marker=this._createMarker(o,t);e.dragging.enable(),this._popup=new i.Control.Bookmarks.FormPopup(i.Util.extend(this.options.formPopup,{mode:i.Control.Bookmarks.FormPopup.modes.UPDATE}),this._marker,this,t).addTo(this._map)},_getOnRemoveHandler:function(t,o){return function(e){e.data.id===t.id&&(o.clearAllEventListeners(),o._popup_&&o._popup_._close(),this.removeLayer(o))}},_createMarker:function(t,o){var e=new i.Marker(t,{icon:this.options.icon||new i.Icon.Default,riseOnHover:!0}).addTo(this._map),s=this._getOnRemoveHandler(o,e);return this._map.on("bookmark:removed",s),e.on("popupclose",function(){this._map.removeLayer(this)}).on("remove",function(){this._map.off("bookmark:removed",s)}),e},_showBookmark:function(t){this._marker&&this._marker._popup_._close();var o=i.latLng(t.latlng),e=this._createMarker(o,t),s=new i.Control.Bookmarks.FormPopup(i.Util.extend(this.options.formPopup,{mode:i.Control.Bookmarks.FormPopup.modes.SHOW}),e,this,t);this.options.popupOnShow&&s.addTo(this._map),this._popup=s,this._marker=e},_gotoBookmark:function(t){this._map.setView(t.latlng,t.zoom),this._showBookmark(t)},_removeBookmark:function(t){var o=function(o){if(!o)return this._showBookmark(t);var e=this;this._data.splice(this._data.indexOf(t),1),this._storage.removeItem(t.id,function(t){e._onBookmarkRemoved(t)})}.bind(this);"function"==typeof this.options.onRemove?this.options.onRemove(t,o):o(!0)},_onBookmarkRemoved:function(t){var o=this._list.querySelector("."+this.options.bookmarkTemplateOptions.itemClass+"[data-id='"+t.id+"']"),s=this;this._map.fire("bookmark:removed",{data:t}),o&&(i.DomUtil.setOpacity(o,0),e.setTimeout(function(){o.parentNode&&o.parentNode.removeChild(o),0===s._data.length&&s._setEmptyListContent()},250))},_getPopupContent:function(t){return this.options.getPopupContent?this.options.getPopupContent.call(this,t):JSON.stringify(t)},_onBookmarkClick:function(t){var o=this._getBookmarkFromListItem(t.delegateTarget);o&&(i.DomEvent.stopPropagation(t),i.DomUtil.hasClass(t.target||t.srcElement,this.options.bookmarkTemplateOptions.removeClass)?this._removeBookmark(o):(this._map.fire("bookmark:show",{data:o}),this.options.collapseOnClick&&this.collapse()))},_getBookmarkFromListItem:function(t){return this.options.getBookmarkFromListItem?this.options.getBookmarkFromListItem.call(this,t):this._getBookmark(t.getAttribute("data-id"))},bookmarkToFeature:function(t){var o=this._getBookmarkCoords(t);return t=JSON.parse(JSON.stringify(t)),delete t.latlng,i.GeoJSON.getFeature({feature:{type:"Feature",id:t.id,properties:t}},{type:"Point",coordinates:o})},_getBookmarkCoords:function(t){return t.latlng instanceof i.LatLng?[t.latlng.lat,t.latlng.lng]:t.latlng.reverse()},fromGeoJSON:function(t){for(var o=[],e=0,i=t.features.length;i>e;e++){var s=t.features[e];s.properties.divider||(s.properties.latlng=s.geometry.coordinates.concat().reverse()),o.push(s.properties)}return o},toGeoJSON:function(){var t=this;return{type:"FeatureCollection",features:function(o){for(var e=[],i=0,s=o.length;s>i;i++)o[i].divider||e.push(t.bookmarkToFeature(o[i]));return e}(this._data)}}});o.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./formpopup":3,"./leaflet.delegate":4,"./storage":6,"./string":8,leaflet:void 0}],3:[function(t,o){(function(e){var i=e.L||t("leaflet"),s=t("./string").substitute,n=t("./string").unique,a={CREATE:1,UPDATE:2,SHOW:3,OPTIONS:4},r=i.Popup.extend({statics:{modes:a},options:{mode:a.CREATE,className:"leaflet-bookmarks-form-popup",templateOptions:{formClass:"leaflet-bookmarks-form",inputClass:"leaflet-bookmarks-form-input",inputErrorClass:"has-error",idInputClass:"leaflet-bookmarks-form-id",coordsClass:"leaflet-bookmarks-form-coords",submitClass:"leaflet-bookmarks-form-submit",inputPlaceholder:"Bookmark name",removeClass:"leaflet-bookmarks-form-remove",editClass:"leaflet-bookmarks-form-edit",cancelClass:"leaflet-bookmarks-form-cancel",editableClass:"editable",removableClass:"removable",menuItemClass:"nav-item",editMenuText:"Edit",removeMenuText:"Remove",cancelMenuText:"Cancel",submitTextCreate:"+",submitTextEdit:'<span class="icon-checkmark"></span>'},generateNames:!1,minWidth:160,generateNamesPrefix:"Bookmark ",template:'<form class="{{ formClass }}"><div class="input-group"><input type="text" name="bookmark-name" placeholder="{{ inputPlaceholder }}" class="form-control {{ inputClass }}" value="{{ name }}"><input type="hidden" class={{ idInputClass }} value="{{ id }}"><button type="submit" class="input-group-addon {{ submitClass }}">{{ submitText }}</button></div><div class="{{ coordsClass }}">{{ coords }}</div></form>',menuTemplate:'<ul class="nav {{ mode }}" role="menu"><li class="{{ editClass }}"><a href="#" class="{{ menuItemClass }}">{{ editMenuText }}</a></li><li class="{{ removeClass }}"><a href="#" class="{{ menuItemClass }}">{{ removeMenuText }}</a></li><li><a href="#" class="{{ menuItemClass }} {{ cancelClass }}">{{ cancelMenuText }}</a></li></ul>'},initialize:function(t,o,e,s){t.offset=this._calculateOffset(o,{}),this._bookmark=s,this._control=e,this._latlng=o.getLatLng(),o._popup_=this,i.Popup.prototype.initialize.call(this,t,o)},_initLayout:function(){if(i.Popup.prototype._initLayout.call(this),this.options.mode===a.SHOW&&(this._bookmark.editable||this._bookmark.removable)){var t=this._menuButton=i.DomUtil.create("a","leaflet-popup-menu-button");this._container.insertBefore(t,this._closeButton),t.href="#menu",t.innerHTML='<span class="menu-icon"></span>',i.DomEvent.disableClickPropagation(t),i.DomEvent.on(t,"click",this._onMenuButtonClick,this)}},_showMenu:function(){this._map.fire("bookmark:options",{data:this._bookmark})},_onMenuButtonClick:function(t){i.DomEvent.preventDefault(t),this._showMenu(),this._close()},_calculateOffset:function(t,o){var e=i.point(t.options.icon.options.popupAnchor||[0,0]);return e=e.add(this.options.offset),o&&o.offset&&(e=e.add(o.offset)),e},_updateContent:function(){var t;if(this.options.mode===a.SHOW)t=this._control._getPopupContent(this._bookmark);else{var o=this.options.template,e=this.options.templateOptions.submitTextCreate;this.options.mode===a.OPTIONS&&(o=this.options.menuTemplate),this.options.mode===a.UPDATE&&(e=this.options.templateOptions.submitTextEdit);var n=[];this._bookmark.editable&&n.push(this.options.templateOptions.editableClass),this._bookmark.removable&&n.push(this.options.templateOptions.removableClass),t=s(o,i.Util.extend({},this._bookmark||{},this.options.templateOptions,{submitText:e,coords:this.formatCoords(this._source.getLatLng(),this._map.getZoom()),mode:n.join(" ")}))}this._content=t,i.Popup.prototype._updateContent.call(this),this._onRendered()},_onRendered:function(){if(this.options.mode===a.CREATE||this.options.mode===a.UPDATE){{var t=this._contentNode.querySelector("."+this.options.templateOptions.formClass);t.querySelector("."+this.options.templateOptions.inputClass)}i.DomEvent.on(t,"submit",this._onSubmit,this),setTimeout(this._setFocus.bind(this),250)}else this.options.mode===a.OPTIONS&&(i.DomEvent.delegate(this._container,"."+this.options.templateOptions.editClass,"click",this._onEditClick,this),i.DomEvent.delegate(this._container,"."+this.options.templateOptions.removeClass,"click",this._onRemoveClick,this),i.DomEvent.delegate(this._container,"."+this.options.templateOptions.cancelClass,"click",this._onCancelClick,this))},_setFocus:function(){var t=this._contentNode.querySelector("."+this.options.templateOptions.inputClass),o=2*t.value.length;t.focus(),t.setSelectionRange(o,o)},_onEditClick:function(t){i.DomEvent.preventDefault(t),this._map.fire("bookmark:edit",{data:this._bookmark}),this._close()},_onRemoveClick:function(t){i.DomEvent.preventDefault(t),this._map.fire("bookmark:remove",{data:this._bookmark}),this._close()},_onCancelClick:function(t){i.DomEvent.preventDefault(t),this._map.fire("bookmark:show",{data:this._bookmark}),this._close()},_getBookmarkData:function(){if(this.options.getBookmarkData)return this.options.getBookmarkData.call(this);var t=this._contentNode.querySelector("."+this.options.templateOptions.inputClass),o=this._contentNode.querySelector("."+this.options.templateOptions.idInputClass);return{latlng:this._source.getLatLng(),zoom:this._map.getZoom(),name:t.value,id:o.value||n()}},_onSubmit:function(t){i.DomEvent.stop(t);var o=this._contentNode.querySelector("."+this.options.templateOptions.inputClass);o.classList.remove(this.options.templateOptions.inputErrorClass),""===o.value&&this.options.generateNames&&(o.value=n(this.options.generateNamesPrefix));var e=this.options.validateInput||function(){return!0};if(""!==o.value&&e.call(this,o.value)){var s=i.Util.extend({},this._bookmark,this._getBookmarkData()),r=this._map;this._close(),this.options.mode===a.CREATE?r.fire("bookmark:add",{data:s}):r.fire("bookmark:edited",{data:s})}else o.classList.add(this.options.templateOptions.inputErrorClass)},formatCoords:function(t,o){return this.options.formatCoords?this.options.formatCoords.call(this,t,o):[t.lat.toFixed(4),t.lng.toFixed(4),o].join(",&nbsp;")},onAdd:function(t){return this._source.on("dragend",this._onSourceMoved,this),this._source.on("dragstart",this._onSourceMoveStart,this),i.Popup.prototype.onAdd.call(this,t)},onRemove:function(t){this._source.off("dragend",this._onSourceMoved,this),i.Popup.prototype.onRemove.call(this,t)},_onSourceMoveStart:function(){this._bookmark=i.Util.extend(this._bookmark||{},this._getBookmarkData()),this._container.style.display="none"},_onSourceMoved:function(){this._latlng=this._source.getLatLng(),this._container.style.display="",this._source.openPopup(),this.update()}});o.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./string":8,leaflet:void 0}],4:[function(t){(function(o){function e(t,o,e,i){for(t=e?{parentNode:t}:t,i=i||document;(t=t.parentNode)&&t!==document;){if(s(t,o))return t;if(t===i)return null}}var i=o.L||t("leaflet"),s=function(t){var o=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||function(t){for(var o=this,e=o.parentNode||o.document,i=e.querySelectorAll(t),s=0,n=i.length;n>s;++s)if(i[s]==o)return!0;return!1};return function(t,e){return o.call(t,e)}}(Element.prototype);i.DomEvent.delegate=function(t,o,s,n,a){return i.DomEvent.on(t,s,function(i){var s=i.target||i.srcElement;i.delegateTarget=e(s,o,!0,t),i.delegateTarget&&!i.propagationStopped&&n.call(a||t,i)})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{leaflet:void 0}],5:[function(t,o){var e={},i=function(t){this._prefix=t};i.prototype.getItem=function(t,o){o(e[this._prefix+t])},i.prototype.setItem=function(t,o,i){e[this._prefix+t]=o,i(o)},i.prototype.getAllItems=function(t){var o=[];for(var i in e)e.hasOwnProperty(i)&&0===i.indexOf(this_prefix)&&o.push(e[i]);t(o)},i.prototype.removeItem=function(t,o){this.getItem(t,function(i){i?delete e[this._prefix+t]:i=null,o&&o(i)})},o.exports=i},{}],6:[function(t,o){(function(e){var i=t("./string").unique,s=function(t,o){"string"!=typeof t&&(o=t,t=i()),this._name=t,this._engine=s.createEngine(o,this._name,Array.prototype.slice.call(arguments,2))};s.engineType={GLOBALSTORAGE:2,LOCALSTORAGE:3},s.Engine={Global:t("./storage.global"),LocalStorage:t("./storage.localstorage")},s.createEngine=function(t,o){return t===s.engineType.GLOBALSTORAGE?new s.Engine.Global(o):t===s.engineType.LOCALSTORAGE?new s.Engine.LocalStorage(o):void 0},s.prototype.setItem=function(t,o,e){return this._engine.setItem(t,o,e),this},s.prototype.getItem=function(t,o){return this._engine.getItem(t,o),this},s.prototype.getAllItems=function(t){this._engine.getAllItems(t)},s.prototype.removeItem=function(t,o){this._engine.removeItem(t,o)},o.exports=e.Storage=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./storage.global":5,"./storage.localstorage":7,"./string":8}],7:[function(t,o){var e=function(t){this._prefix=t,this._storage=window.localStorage};e.JSON_RE=/^[\{\[](.)*[\]\}]$/,e.prototype.getItem=function(t,o){var i=this._storage.getItem(this._prefix+t);i&&e.JSON_RE.test(i)&&(i=JSON.parse(i)),o(i)},e.prototype.getAllItems=function(t){var o=[],e=this._prefix.length;for(var i in this._storage)null!==this._storage.getItem(i)&&0===i.indexOf(this._prefix)&&this.getItem(i.substring(e),function(t){o.push(t)});t(o)},e.prototype.removeItem=function(t,o){var e=this;this.getItem(t,function(i){e._storage.removeItem(e._prefix+t),o&&o(i)})},e.prototype.setItem=function(t,o,e){var i=o.toString();"[object Object]"===i&&(i=JSON.stringify(o)),this._storage.setItem(this._prefix+t,i),e(o)},o.exports=e},{}],8:[function(t,o){function e(t,o,e){return t.replace(e||/{{([\s\S]+?)}}/g,function(t,e){if(e=s(e),-1===e.indexOf("."))return"\\"==t.charAt(0)?t.slice(1):null!=o[e]?o[e]:"";var i=o;e=e.split(".");for(var n=0,a=e.length;a>n;n++){if(!(e[n]in i))return"";i=i[e[n]]}return i})}function i(t){var o="abcdefghijklmnopqrstuvwxyz";return(t||o[Math.floor(Math.random()*o.length)])+(new Date).getTime().toString(16)}function s(t){return t.replace(/^\s+|\s+$/g,"")}function n(t){return s(t.replace(/\s+/g," "))}o.exports={substitute:e,trim:s,clean:n,unique:i}},{}]},{},[1])(1)});